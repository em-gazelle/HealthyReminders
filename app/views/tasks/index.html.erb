<% content_for :stylesheets do %>
  <%= stylesheet_link_tag 'tasks' %>
<% end %>

<table id="user-charts">
        <% @tasks.each_slice(3) do |row| %>
<tr>
        <% row.each do |task| %>
<td>
            Your Progress: <%= task.reminder_type %>
            <% if task.reminder_type == ("Weigh-In" && "Weight") %>
              <%= line_chart task.records.group_by_month(:created_at, format: "%B %d, %Y").maximum(:weight), min: 90, discrete: true %>
            <% else %>
              <%= pie_chart task.records.group(:completed).count, library: {backgroundColor: "black", margin: "0px"} %>
            <% end %>
</td>
        <% end %>
</tr>
<% end %>
</table>

<h1>Here are your tasks...</h1>
<table>
  <tr>
    <th>Reminder type</th>
    <th>Frequency</th>
    <th>Reminder time</th>
    <th>Message</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @tasks.each do |task| %>
<%#= user = current_user %>
  <tr>
    <td><%= task.reminder_type %></td>
    <td><%= task.frequency %></td>
    <td><%= task.reminder_time %></td>
    <td><%= task.message %></td>
    <td><%= link_to "Show", [@user, task] %></td>
    <td><%= link_to "Add Record", new_user_task_record_path(@user, task) %></td>    
    <td><%= link_to "Edit", edit_user_task_path(@user, task) %></td>
    <td><%= link_to "Destroy", [@user, task], method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to "Add a Task!", new_user_task_path(@user) %>